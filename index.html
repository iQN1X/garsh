<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <title>ุบุฑุณุฉ - ุฅุฏุงุฑุฉ ูุฑุนุงูุฉ ุงููุจุงุชุงุช</title>
    <meta name="theme-color" content="#2e7d32" />
    <link rel="manifest" href="./manifest.webmanifest" />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <header class="app-header">
      <h1>ุบุฑุณุฉ</h1>
      <p class="subtitle">ุฅุฏุงุฑุฉ ูุฑุนุงูุฉ ุงููุจุงุชุงุช ุนูู ุงูุฌูุงู ูุงูููุจููุชุฑ</p>
      <button id="inventory-btn" class="icon-btn" aria-label="ุงููุฎุฒู" title="ุงููุฎุฒู" style="position:absolute; right:16px; top:16px;">
        ๐งบ <span id="inventory-count" class="badge">0</span>
      </button>
    </header>

    <nav class="tabs" role="tablist" aria-label="ุงูุชููู">
      <button class="tab active" data-view="plants" aria-selected="true" data-i18n="tabs.plants">ูุจุงุชุงุชู</button>
      <button class="tab" data-view="search" data-i18n="tabs.search">ุงูุจุญุซ</button>
      <button class="tab" data-view="care" data-i18n="tabs.care">ุงูุนูุงูุฉ</button>
      <button class="tab" data-view="encyclopedia" data-i18n="tabs.encyclopedia">ุงูููุณูุนุฉ</button>
      <button class="tab" data-view="dashboard" data-i18n="tabs.dashboard">ููุญุฉ ุงูุชุญูู</button>
      <button class="tab" data-view="settings" data-i18n="tabs.settings">ุงูุฅุนุฏุงุฏุงุช</button>
      <div class="lang-switch">
        <label for="lang-select" data-i18n="labels.language">ุงููุบุฉ</label>
        <select id="lang-select">
          <option value="ar">ุงูุนุฑุจูุฉ</option>
          <option value="en">English</option>
        </select>
      </div>
    </nav>

    <main id="views" class="views">
      <!-- ููุญุฉ ุงููุฎุฒู -->
      <div id="inventory-panel" class="inventory-panel card" style="display:none; position:fixed; right:16px; top:72px; width:320px; max-height:60vh; overflow:auto; z-index:200;">
        <div class="plant-header">
          <strong>ุงููุฎุฒู</strong>
          <button class="secondary" onclick="document.getElementById('inventory-panel').style.display='none'">ุฅุบูุงู</button>
        </div>
        <div id="inventory-list" class="list"></div>
      </div>
      <!-- Plants Management -->
      <section id="view-plants" class="view active" aria-labelledby="plants">
        <h2 data-i18n="titles.plants">ูุธุงู ุฅุฏุงุฑุฉ ุงููุจุงุชุงุช</h2>
        <form id="plant-form" class="card form">
          <div class="row">
            <label data-i18n="labels.plantName">ุงุณู ุงููุจุชุฉ</label>
            <input type="text" id="plant-name" placeholder="ูุซุงู: ุทูุงุทู ุงูุดุฑูุฉ" required />
          </div>
          <div class="row">
            <label data-i18n="labels.species">ุงูููุน</label>
            <input list="species-list" id="plant-species" placeholder="ุงุฎุชุฑ ุฃู ุงูุชุจ ุงูููุน" />
            <datalist id="species-list"></datalist>
          </div>
          <div class="row">
            <label data-i18n="labels.plantedDate">ุชุงุฑูุฎ ุงูุฒุฑุงุนุฉ</label>
            <input type="date" id="plant-date" required />
          </div>
          <div class="row">
            <label data-i18n="labels.notes">ููุงุญุธุงุช</label>
            <textarea id="plant-notes" rows="2" placeholder="ูุนูููุงุช ุฅุถุงููุฉ"></textarea>
          </div>
          <div class="row">
            <label data-i18n="labels.initialPhoto">ุตูุฑุฉ ุฃูููุฉ</label>
            <input type="file" id="plant-photo" accept="image/*" capture="environment" />
          </div>
          <button type="submit" class="primary" data-i18n="actions.addPlant">ุฅุถุงูุฉ ุงููุจุชุฉ</button>
        </form>

        <div id="plants-list" class="grid"></div>
      </section>

      <!-- Plant Detail -->
      <section id="view-plant" class="view" aria-labelledby="plant">
        <h2 id="plant-detail-title">ุชูุงุตูู ุงููุจุชุฉ</h2>
        <div id="plant-detail" class="grid">
          <div class="card">
            <h3>ุงูููุฎุต</h3>
            <div id="plant-summary"></div>
            <div class="actions">
              <button id="back-to-plants" class="secondary">ุนูุฏุฉ</button>
            </div>
          </div>
          <div class="card">
            <h3>ุณุฌู ุงูููู</h3>
            <div class="form">
              <div class="row cols">
                <label><input type="checkbox" id="log-watered"/> ุชู ุงูุฑู</label>
                <label><input type="checkbox" id="log-fertilized"/> ุชู ุงูุชุณููุฏ</label>
              </div>
              <div class="row">
                <textarea id="log-note" rows="2" placeholder="ููุงุญุธุฉ ุงูููู"></textarea>
              </div>
              <div class="actions">
                <button id="save-today-log" class="primary">ุญูุธ ุณุฌู ุงูููู</button>
              </div>
            </div>
          </div>
          <div class="card">
            <h3>ุงูุฎุท ุงูุฒููู ุงููููู</h3>
            <div id="daily-timeline" class="timeline"></div>
          </div>
          <div class="card">
            <h3>ุชููุน ุดูู ุงููุจุชุฉ</h3>
            <div class="form">
              <div class="row cols">
                <div>
                  <label>ุฃูุงู ูุงุฏูุฉ</label>
                  <input type="number" id="predict-days" min="0" value="14" />
                </div>
                <div>
                  <label>ุงููุฑุญูุฉ ุงููุชููุนุฉ</label>
                  <div id="predicted-stage" class="plant-meta">โ</div>
                </div>
              </div>
            </div>
            <div class="growth-visual">
              <div id="growth-bar" class="growth-bar"><span></span></div>
              <small id="growth-hint" class="plant-meta"></small>
            </div>
          </div>
        </div>
      </section>

      <!-- Advanced Search -->
      <section id="view-search" class="view" aria-labelledby="search">
        <h2 data-i18n="titles.search">ุจุญุซ ูุชูุฏู</h2>
        <div class="card form">
          <div class="row">
            <label data-i18n="labels.searchText">ูุต ุงูุจุญุซ</label>
            <input type="text" id="search-text" placeholder="ุงุณู ุฃู ููุน" />
          </div>
          <div class="row">
            <label data-i18n="labels.filterSpecies">ููุชุฑ ุงูููุน</label>
            <input list="species-list" id="filter-species" placeholder="ุงุฎุชุฑ ุงูููุน" />
          </div>
          <div class="row">
            <label data-i18n="labels.filterLight">ุงูุฅุถุงุกุฉ</label>
            <select id="filter-light">
              <option value="">โ</option>
              <option value="ุดูุณ ูุจุงุดุฑุฉ">ุดูุณ ูุจุงุดุฑุฉ</option>
              <option value="ุดูุณ ุบูุฑ ูุจุงุดุฑุฉ">ุดูุณ ุบูุฑ ูุจุงุดุฑุฉ</option>
              <option value="ุธู ุฌุฒุฆู">ุธู ุฌุฒุฆู</option>
            </select>
          </div>
          <div class="row cols">
            <div>
              <label data-i18n="labels.minDays">ุฃูู ุฃูุงู ููุฐ ุงูุฒุฑุงุนุฉ</label>
              <input type="number" id="min-days" min="0" />
            </div>
            <div>
              <label data-i18n="labels.maxDays">ุฃูุตู ุฃูุงู ููุฐ ุงูุฒุฑุงุนุฉ</label>
              <input type="number" id="max-days" min="0" />
            </div>
          </div>
          <div class="row cols">
            <div>
              <label data-i18n="labels.waterEvery">ุฑู ูู (ุฃูุงู)</label>
              <input type="number" id="filter-water" min="0" />
            </div>
            <div>
              <label data-i18n="labels.fertilizeEvery">ุชุณููุฏ ูู (ุฃูุงู)</label>
              <input type="number" id="filter-fert" min="0" />
            </div>
          </div>
          <div class="actions">
            <button class="primary" id="apply-filters" data-i18n="actions.applyFilters">ุชุทุจูู ุงููุฑุดุญุงุช</button>
            <button class="secondary" id="reset-filters" data-i18n="actions.reset">ุฅุนุงุฏุฉ ุถุจุท</button>
          </div>
        </div>
        <div id="search-results" class="grid"></div>
      </section>

      <!-- Care Requirements -->
      <section id="view-care" class="view" aria-labelledby="care">
        <h2 data-i18n="titles.care">ูุชุทูุจุงุช ุงูุนูุงูุฉ</h2>
        <div class="card">
          <h3 data-i18n="subtitles.generalCare">ูุชุทูุจุงุช ุนุงูุฉ ูุฌููุน ุงููุจุงุชุงุช</h3>
          <form id="general-care-form" class="form">
            <div class="row">
              <label data-i18n="labels.waterEvery">ุงูุฑู ูู (ุฃูุงู)</label>
              <input type="number" id="general-water" min="1" placeholder="ูุซุงู: 2" />
            </div>
            <div class="row">
              <label data-i18n="labels.fertilizeEvery">ุงูุชุณููุฏ ูู (ุฃูุงู)</label>
              <input type="number" id="general-fertilize" min="1" placeholder="ูุซุงู: 14" />
            </div>
            <div class="row">
              <label data-i18n="labels.light">ุงูุฅุถุงุกุฉ</label>
              <select id="general-light">
                <option value="">โ</option>
                <option value="ุดูุณ ูุจุงุดุฑุฉ">ุดูุณ ูุจุงุดุฑุฉ</option>
                <option value="ุดูุณ ุบูุฑ ูุจุงุดุฑุฉ">ุดูุณ ุบูุฑ ูุจุงุดุฑุฉ</option>
                <option value="ุธู ุฌุฒุฆู">ุธู ุฌุฒุฆู</option>
              </select>
            </div>
            <button type="submit" class="primary" data-i18n="actions.saveGeneralCare">ุญูุธ ุงููุชุทูุจุงุช ุงูุนุงูุฉ</button>
          </form>
        </div>

        <div class="card">
          <h3 data-i18n="subtitles.notifications">ุงูุชูุจููุงุช</h3>
          <p data-i18n="texts.notificationsHint">ููุชุฐููุฑ ุจุงูููุงูุ ูุนูู ุงูุฅุดุนุงุฑุงุช ุซู ุณูุนุฑุถ ุงูุชูุจููุงุช ุนูุฏ ูุชุญ ุงูุชุทุจูู ููู ุงูููุงุนูุฏ ุงููุณุชุญูุฉ ุฃุซูุงุก ุงูุงุณุชุฎุฏุงู.</p>
          <div class="row">
            <button id="enable-notifications" class="secondary" data-i18n="actions.enableNotifications">ุชูุนูู ุงูุฅุดุนุงุฑุงุช</button>
          </div>
          <div id="reminders" class="list"></div>
        </div>
      </section>

      <!-- Encyclopedia -->
      <section id="view-encyclopedia" class="view" aria-labelledby="encyclopedia">
        <h2 data-i18n="titles.encyclopedia">ุงูููุณูุนุฉ</h2>
        <div class="card">
          <div class="row ency-choices">
            <button type="button" id="btn-ency-plants" class="ency-choice">
              <img src="./images/ency-plants.svg" alt="" aria-hidden="true" />
              <span>ููุณูุนุฉ ุงููุจุงุช</span>
            </button>
            <button type="button" id="btn-ency-soil" class="ency-choice">
              <img src="./images/ency-soil.svg" alt="" aria-hidden="true" />
              <span>ููุณูุนุฉ ุงูุชุฑุจุฉ</span>
            </button>
            <button type="button" id="btn-ency-fert" class="ency-choice">
              <img src="./images/ency-fert.svg" alt="" aria-hidden="true" />
              <span>ููุณูุนุฉ ุงูุฃุณูุฏุฉ</span>
            </button>
          </div>
        </div>

        <h3 id="ency-title" class="ency-title"></h3>

        <!-- ููุณูุนุฉ ุงููุจุงุช -->
        <div id="ency-plants" style="display:none">
          <div class="card form">
            <div class="row cols">
              <input type="text" id="ency-search" placeholder="ุจุญุซ ูู ุงูููุณูุนุฉ (ุงุณู ุฃู ููุน)" />
              <select id="ency-category" aria-label="ูุณู">
                <option value="">ุงููู</option>
                <option value="ุฎุถุฑูุงุช">ุฎุถุฑูุงุช</option>
                <option value="ููุงูู">ููุงูู</option>
                <option value="ุฃุนุดุงุจ">ุฃุนุดุงุจ</option>
                <option value="ุฒููุฑ">ุฒููุฑ</option>
                <option value="ุฃุดุฌุงุฑ">ุฃุดุฌุงุฑ</option>
                <option value="ููุฒููุฉ">ููุฒููุฉ</option>
                <option value="ุตุจุงุฑุงุช">ุตุจุงุฑุงุช</option>
              </select>
            </div>
          </div>
          <div id="encyclopedia-list" class="grid"></div>
          <div class="card form">
            <h3 data-i18n="subtitles.manageEncyclopedia">ุฅุฏุงุฑุฉ ุงูููุณูุนุฉ</h3>
            <div class="row cols">
              <input type="text" id="ency-name" placeholder="ุงุณู ุงูููุน" />
              <input type="text" id="ency-germ" placeholder="ุฃูุงู ุงูุฅูุจุงุช" />
            </div>
            <div class="row cols">
              <input type="text" id="ency-light" placeholder="ุงูุฅุถุงุกุฉ" />
              <input type="text" id="ency-water" placeholder="ุงูุฑู" />
              <input type="text" id="ency-fertilize" placeholder="ุงูุชุณููุฏ" />
              <input type="text" id="ency-height" placeholder="ุงูุทูู ุงูุชูุฑูุจู (ุงุฎุชูุงุฑู)" />
            </div>
            <div class="row">
              <select id="ency-add-category">
                <option value="">ูุณู (ุงุฎุชูุงุฑู)</option>
                <option value="ุฎุถุฑูุงุช">ุฎุถุฑูุงุช</option>
                <option value="ููุงูู">ููุงูู</option>
                <option value="ุฃุนุดุงุจ">ุฃุนุดุงุจ</option>
                <option value="ุฒููุฑ">ุฒููุฑ</option>
                <option value="ุฃุดุฌุงุฑ">ุฃุดุฌุงุฑ</option>
                <option value="ููุฒููุฉ">ููุฒููุฉ</option>
                <option value="ุตุจุงุฑุงุช">ุตุจุงุฑุงุช</option>
              </select>
            </div>
            <div class="row">
              <input type="text" id="ency-image" placeholder="ุฑุงุจุท ุตูุฑุฉ (ุงุฎุชูุงุฑู)" />
            </div>
            <div class="row">
              <input type="text" id="ency-stages" placeholder="ุงููุฑุงุญู ููุตููุฉ ุจููุงุตู" />
            </div>
            <button class="primary" id="ency-add" data-i18n="actions.addType">ุฅุถุงูุฉ ุงูููุน</button>
          </div>
        </div>

        <!-- ููุณูุนุฉ ุงูุชุฑุจุฉ -->
        <div id="ency-soil" style="display:none">
          <div class="card">
            <h3>ููุณูุนุฉ ุงูุชุฑุจุฉ</h3>
            <p class="plant-meta">ุงุฎุชุฑ ูุฐุง ุงููุณู ูุนุฑุถ ุฃููุงุน ุงูุชุฑุจุฉ ูุฎุตุงุฆุตูุง.</p>
          </div>
          <div id="soil-list" class="grid"></div>
        </div>

        <!-- ููุณูุนุฉ ุงูุฃุณูุฏุฉ -->
        <div id="ency-fert" style="display:none">
          <div class="card">
            <h3>ููุณูุนุฉ ุงูุฃุณูุฏุฉ</h3>
            <p class="plant-meta">ุงุฎุชุฑ ูุฐุง ุงููุณู ูุนุฑุถ ุฃููุงุน ุงูุฃุณูุฏุฉ ูุทุฑููุฉ ุงูุงุณุชุฎุฏุงู.</p>
          </div>
          <div id="fertilizer-list" class="grid"></div>
        </div>
      </section>

      <!-- Dashboard -->
      <section id="view-dashboard" class="view" aria-labelledby="dashboard">
        <h2 data-i18n="titles.dashboard">ููุญุฉ ุงูุชุญูู</h2>
        <div class="grid">
          <div class="card"><h3 data-i18n="subtitles.totals">ุฅุฌูุงููุงุช</h3><div id="metric-totals"></div></div>
          <div class="card"><h3 data-i18n="subtitles.performance">ุฃุฏุงุก</h3><div id="metric-performance"></div></div>
          <div class="card"><h3 data-i18n="subtitles.activity">ุงููุดุงุท</h3><div id="metric-activity"></div></div>
        </div>
        <div class="card">
          <h3 data-i18n="subtitles.dataManagement">ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช</h3>
          <div class="actions">
            <button class="secondary" id="export-data" data-i18n="actions.exportData">ุชุตุฏูุฑ</button>
            <label class="secondary" data-i18n="actions.importDataLabel">ุงุณุชูุฑุงุฏ<input type="file" id="import-data" accept="application/json" hidden/></label>
            <button class="danger" id="reset-data" data-i18n="actions.resetData">ุฅุนุงุฏุฉ ุชุนููู</button>
          </div>
        </div>
      </section>

      <!-- Settings -->
      <section id="view-settings" class="view" aria-labelledby="settings">
        <h2 data-i18n="titles.settings">ุงูุฅุนุฏุงุฏุงุช</h2>
        <div class="card">
          <p data-i18n="texts.pwa">ุชุทุจูู ููุจ ุชูุฏูู (PWA) ูุนูู ุฏูู ุงุชุตุงู ุจุนุฏ ุงูุชุซุจูุชุ ููุฏุนู ุงูุฌูุงู ูุงูููุจููุชุฑ.</p>
          <button id="install-button" class="primary" hidden data-i18n="actions.installApp">ุชุซุจูุช ุงูุชุทุจูู</button>
        </div>
        <div class="card">
          <h3 data-i18n="subtitles.notificationsCenter">ูุฑูุฒ ุงูุฅุดุนุงุฑุงุช</h3>
          <div id="notification-center" class="list"></div>
        </div>
      </section>
    </main>

    <footer class="app-footer">
      <small>ยฉ 2025 ุบุฑุณุฉ</small>
    </footer>

    <script src="./encyclopedia.js"></script>
    <script src="./app.js"></script>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('./sw.js').catch(console.error);
        });
      }
    </script>
  </body>
  </html>